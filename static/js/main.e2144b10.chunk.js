(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{11:function(e,t,n){},24:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var c=n(12),a=(n(22),n(23),n(24),n(13)),r=n(3),o=n(9),i=n(5),l=n.n(i),s=n(8),u=n(2),d=n(1),f=n(4),p=n.n(f),j=n(0),b="https://mate.academy/students-api";function h(e){return new Promise((function(t){setTimeout(t,e)}))}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c={method:t};return n&&(c.body=JSON.stringify(n),c.headers={"Content-Type":"application/json; charset=UTF-8"}),h(300).then((function(){return fetch(b+e,c)})).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var O,v=function(e){return m(e)},x=function(e,t){return m(e,"POST",t)},g=function(e,t){return m(e,"PATCH",t)},_=function(e){return m(e,"DELETE")},k=function(e){return _("/todos/".concat(e))},N=function(e){return g("/todos/".concat(e.id),e)},y=(n(11),function(e){var t=e.todo,n=e.handleDelete,c=e.changeStatus,a=e.changeTitle,o=t.completed,i=t.title,l=Object(d.useState)(!1),s=Object(u.a)(l,2),f=s[0],b=s[1],h=Object(d.useState)(i),m=Object(u.a)(h,2),O=m[0],v=m[1],x=Object(d.useState)(t),g=Object(u.a)(x,2),_=g[0],y=g[1],C=function(e,t){e.preventDefault(),f&&(O&&""!==O||(n(_.id),k(_.id)),O!==_.title&&N(Object(r.a)(Object(r.a)({},_),{},{title:t})),b(!1),a(_,t))};return Object(j.jsxs)("div",{className:p()("todo",{completed:o}),onDoubleClick:function(){return y(t),void b(!0)},children:[Object(j.jsx)("label",{className:"todo__status-label",htmlFor:"checkbox_status",children:Object(j.jsx)("input",{id:"checkbox_status",type:"checkbox",className:"todo__status",checked:o,onClick:function(){return c(t)},onKeyUp:function(e){"Escape"===e.key&&(e.preventDefault(),b(!1))}})}),f?Object(j.jsx)("form",{onSubmit:function(e){return C(e,O)},children:Object(j.jsx)("input",{className:"todo__title-field",type:"text",id:"fname",name:"todo",value:O,onChange:function(e){e.preventDefault(),v(e.target.value)},onBlur:function(e){return C(e,O)}})}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{className:"todo__title",children:t.title}),Object(j.jsxs)("div",{className:"modal overlay",children:[Object(j.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(j.jsx)("div",{className:"loader"})]}),Object(j.jsx)("button",{type:"button",className:"todo__remove",onClick:function(){return n(t.id)},children:"\xd7"})]})]},t.id)}),C=function(e){var t=e.todos,n=e.handleDelete,c=e.changeStatus,a=e.changeTitle;return Object(j.jsx)(j.Fragment,{children:t.map((function(e){return Object(j.jsx)(y,{todo:e,handleDelete:n,changeStatus:function(){return c(e)},changeTitle:function(e,t){return a(e,t)}},e.id)}))})};!function(e){e.Active="active",e.Completed="completed",e.All="all"}(O||(O={}));var T,S=function(e){var t=e.setFilterValue,n=e.filterValue;return Object(j.jsxs)("nav",{className:"filter",children:[Object(j.jsx)("a",{href:"#/",className:p()("filter__link",{selected:n===O.All}),onClick:function(){return t(O.All)},children:"All"}),Object(j.jsx)("a",{href:"#/active",className:p()("filter__link",{selected:n===O.Active}),onClick:function(){return t(O.Active)},children:"Active"}),Object(j.jsx)("a",{href:"#/completed",className:p()("filter__link",{selected:n===O.Completed}),onClick:function(){return t(O.Completed)},children:"Completed"})]})},w=function(e){var t=e.setFilterValue,n=e.filterValue,c=e.todos,a=e.clearCompletedTodos,r=e.completedTodos,o=c.filter((function(e){return!e.completed}));return Object(j.jsxs)("footer",{className:"todoapp__footer",children:[Object(j.jsxs)("span",{className:"todo-count",children:[o.length," ","items left"]}),Object(j.jsx)(S,{setFilterValue:t,filterValue:n}),0!==r.length&&Object(j.jsx)("button",{type:"button",className:"todoapp__clear-completed",onClick:a,children:"Clear completed"})]})},A=function(e){var t=e.errorMessage,n=e.showNotification,c=e.setShowNotification;return Object(d.useEffect)((function(){if(n){var e=setTimeout((function(){c(!1)}),3e3);return function(){return clearTimeout(e)}}}),[n]),n?Object(j.jsxs)("div",{className:"notification is-danger is-light has-text-weight-normal",children:[Object(j.jsx)("button",{type:"button",className:"delete","aria-label":"Mute volume",onClick:function(){return c(!1)}}),t]}):Object(j.jsx)(j.Fragment,{})};!function(e){e.NoError="",e.Adding="Unable to add a todo",e.Deleting="Unable to delete a todo",e.Updating="Unable to update a todo",e.Loading="Unable to load todos",e.EmptyTitle="Title can't be empty"}(T||(T={}));var E=6752,D=function(){var e=Object(d.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],i=Object(d.useState)(O.All),f=Object(u.a)(i,2),b=f[0],h=f[1],m=Object(d.useState)(T.NoError),g=Object(u.a)(m,2),_=g[0],y=g[1],S=Object(d.useState)(""),D=Object(u.a)(S,2),U=D[0],F=D[1],V=Object(d.useState)(!1),L=Object(u.a)(V,2),I=L[0],J=L[1],M=Object(d.useState)(null),P=Object(u.a)(M,2),B=P[0],G=P[1],H=Object(d.useState)(!1),K=Object(u.a)(H,2),R=K[0],W=K[1],q=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,W(!0),e.next=4,v("/todos?userId=".concat(E));case 4:t=e.sent,c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),y(T.Loading);case 11:return e.prev=11,W(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){q()}),[]);var z=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n={userId:E,title:U.trim(),completed:!1},F(""),G(Object(r.a)(Object(r.a)({},n),{},{id:0})),U){e.next=8;break}return y(T.EmptyTitle),J(!0),e.abrupt("return");case 8:if(!U.trim()){e.next=25;break}return e.prev=9,W(!0),e.next=13,x("/todos",n);case 13:a=e.sent,c((function(e){return[].concat(Object(o.a)(e),[a])})),G(null),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(9),y(T.Adding),J(!0);case 22:return e.prev=22,W(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[9,18,22,25]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,W(!0),e.next=4,k(t);case 4:c((function(e){return e.filter((function(e){return e.id!==t}))})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),y(T.Deleting);case 10:return e.prev=10,W(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),X=n.filter((function(e){return e.completed}));return Object(j.jsxs)("div",{className:"todoapp",children:[Object(j.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(j.jsxs)("div",{className:"todoapp__content",children:[Object(j.jsxs)("header",{className:"todoapp__header",children:[n&&Object(j.jsx)("button",{type:"button",className:p()("todoapp__toggle-all",{active:!function(e){var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){if(!t.value.completed)return!1}}catch(c){n.e(c)}finally{n.f()}return!0}}),onClick:function(){return function(){try{W(!0),c((function(e){return e.map((function(e){return e.completed?e:Object(r.a)(Object(r.a)({},e),{},{completed:!0})}))}))}catch(e){y(T.Loading),y(T.Updating)}finally{W(!1)}}()}}),Object(j.jsx)("form",{onSubmit:z,children:Object(j.jsx)("input",{type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",value:U,onChange:function(e){F(e.target.value)},disabled:R})})]}),Object(j.jsx)("section",{className:"todoapp__main",children:{tempTodo:B}&&Object(j.jsx)(C,{todos:function(){var e=Object(o.a)(n);switch(b){case O.Active:e=e.filter((function(e){return!e.completed}));break;case O.Completed:e=e.filter((function(e){return e.completed}))}return e}(),handleDelete:Q,changeStatus:function(e){try{W(!0),c((function(t){return t.map((function(t){return t.id===e.id?Object(r.a)(Object(r.a)({},t),{},{completed:!t.completed}):t}))})),N(e)}catch(t){y(T.Loading),y(T.Updating)}finally{W(!1)}},changeTitle:function(e,t){try{W(!0),c((function(n){return n.map((function(n){return n.id===e.id?Object(r.a)(Object(r.a)({},n),{},{title:t}):n}))})),N(e)}catch(n){y(T.Loading),y(T.Updating)}finally{W(!1)}}})}),0!==n.length&&Object(j.jsx)(w,{setFilterValue:h,filterValue:b,todos:n,clearCompletedTodos:function(){n.filter((function(e){return e.completed&&(k(e.id),Q(e.id)),e})),c(n)},completedTodos:X})]}),_&&Object(j.jsx)(A,{errorMessage:_,showNotification:I,setShowNotification:J})]})};Object(c.createRoot)(document.getElementById("root")).render(Object(j.jsx)(D,{}))}},[[27,1,2]]]);
//# sourceMappingURL=main.e2144b10.chunk.js.map